// Copyright 2014-2016 VintaSoft Ltd. All rights reserved.
// This software is protected by International copyright laws.
// Any copying, duplication, deployment, redistribution, modification or other
// disposition hereof is STRICTLY PROHIBITED without an express written license
// granted by VintaSoft Ltd. This notice may not be removed or otherwise
// altered under any circumstances.
// This code may NOT be used apart of the VintaSoft product.
var Vintasoft;
(function(u){if(void 0==window.jQuery)throw Error("jQuery is not found.");if(void 0==u.version)u.version="1.0.4.1";else if("1.0.4.1"!==u.version)throw Error("Wrong script version.");u.Shared=u.Shared||(u.Shared={});(function(g){function u(b){function e(){}e.prototype=b;return new e}function F(){for(var b=0;b<h._14.length;b++){var e=new r("RefreshStorageImages",void 0,void 0,{type:"POST",data:h._15[b]});h._14[b].sendRequest(e)}}g.extend=function(b,e){b.prototype=u(e.prototype);b.prototype.constructor=b;
b.superclass=e.prototype};var x=function(){x.prototype.getAllAvailableNames=function(){};x.prototype.getAllAvailableValues=function(){};x.prototype.valueOf=function(){};x.prototype.toString=function(){};x.prototype.equals=function(b){};x.prototype.isFlagged=function(){return!1}},y=function(){y.prototype.toArray=function(){};y.prototype.contains=function(b){};y.prototype.add=function(b){};y.prototype.remove=function(b){};y.prototype.isFlagged=function(){return!0}};g.extend(y,x);var E=function(){};
E.create=function(b,e){function a(a,c){var f=[];if(void 0!=d[c])f.push(d[c]);else for(var b=1;b<=z;)0!==n(c,b)&&f.push(d[b]),b*=2;return f.join("|")}function c(a){return{low:a%4294967296|0,high:a/4294967296|0}}function n(a,d){var n=c(a),f=c(d);return 4294967296*(n.high&f.high)+((n.low&f.low)>>>0)}for(var d={},z=0,f=0;f<b.length;f++)d[d[b[f].name]=b[f].value]=b[f].name;Object.freeze&&Object.freeze(d);if(e)for(f in d){if(!isNaN(Number(f))){var p=parseInt(f);0!==p&&0===n(p,p-1)&&(z+=p)}}else for(f in d)isNaN(Number(f))||
(p=parseInt(f),p>z&&(z=p));var k=function(c){"string"===typeof c&&(c=d[c]);if(c>z)throw Error("Argument type exception.");var n=d[c];void 0==n&&e&&(n=a(this,c));if(void 0==n||""===n)throw Error("Argument type exception.");this[this[n]=c+0]=n};e?g.extend(k,y):g.extend(k,x);k.prototype.getAllAvailableNames=function(){var a=[],c;for(c in d)isNaN(Number(c))&&a.push(c);return a};k.prototype.getAllAvailableValues=function(){var a=[],c;for(c in d)isNaN(Number(c))&&void 0!=d[c]&&a.push(d[c]);return a};k.prototype.valueOf=
function(){for(var a in this){var c=Number(a);if(!isNaN(c))return c}};k.prototype.toString=function(){return a(this,this.valueOf())};e&&(k.prototype.toArray=function(){var a=this.valueOf(),c=[];if(0===a&&void 0!==d[a])c.push(new k(0));else for(var f=1;f<=z;){if(0!==n(a,f))try{c.push(new k(f))}catch(b){}f*=2}return c},k.prototype.contains=function(a){var c=this.valueOf();"string"===typeof a&&(a=d[a]);return n(c,a)===a+0},k.prototype.add=function(a){var n=this.valueOf();"string"===typeof a&&(a=d[a]);
n=c(n);a=c(a);return new k(4294967296*(n.high|a.high)+((n.low|a.low)>>>0))},k.prototype.remove=function(a){var f=this.valueOf();"string"===typeof a&&(a=d[a]);var b=a;a=c(f);b=c(b);return new k(n(4294967296*(a.high^b.high)+((a.low^b.low)>>>0),f))});k.prototype.equals=function(a){var c=this.valueOf();"string"===typeof a&&(a=d[a]);return c===a+0};k.prototype.isFlagged=function(){return e};return k};g.WebPixelFormatEnumJS=E.create([{name:"Undefined",value:0},{name:"Indexed1",value:1},{name:"BlackWhite",
value:2},{name:"Indexed4",value:4},{name:"Indexed8",value:8},{name:"Gray8",value:9},{name:"Bgr555",value:14},{name:"Bgr565",value:15},{name:"Gray16",value:16},{name:"Bgr24",value:24},{name:"Bgr32",value:32},{name:"Bgra32",value:33},{name:"Bgr48",value:48},{name:"Bgra64",value:64}],!1);g.WebImagingEnviromentJS=function(){};g.WebImagingEnviromentJS._13=function(){};g.WebImagingEnviromentJS._13=void 0;g.WebImagingEnviromentJS.get_SessionId=function(){return g.WebImagingEnviromentJS._13};g.WebImagingEnviromentJS.set_SessionId=
function(b){if(void 0!=g.WebImagingEnviromentJS._13)throw Error("Session ID already initialized.");if(!/^\w+$/.test(b))throw Error("Unsupported Session ID format.");g.WebImagingEnviromentJS._13=b};g.WebImagingEnviromentJS.get_ScrollSize=function(){var b=document.createElement("div");b.id="FindScrollSizeDiv";b.style.overflow="scroll";b.style.visibility="hidden";b.style.position="absolute";b.style.width="100px";b.style.height="100px";document.body.appendChild(b);var e=b.offsetWidth-b.clientWidth;0>
e&&(e=100-b.clientWidth);$("#FindScrollSizeDiv").remove();return e};g.WebImagingEnviromentJS.getScreenDpi=function(){var b=$("<div>",{id:"FindDpiDiv"}).appendTo(document.getElementsByTagName("body")[0]);$(b).css("position","absolute");$(b).css("top","-100%");$(b).css("left","-100%");$(b).css("width","1in");$(b).css("height","1in");b=document.getElementById("FindDpiDiv");b={dpiX:b.offsetWidth,dpiY:b.offsetHeight};$("#FindDpiDiv").remove();return b};g.WebImagingEnviromentJS.guid=function(){function b(){return Math.floor(65536*
(1+Math.random())).toString(16).substring(1)}return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()};var t=function(b,e,a,c,n){this._20=b;this._21=e;this._22=a;this._23=c;this._24=[];this._25=n?n:!1;t.prototype.get_ShortName=function(){return this._20};t.prototype.get_FullName=function(){return this._21};t.prototype.get_Value=function(){return this._22};t.prototype.get_ReadOnly=function(){return this._23};t.prototype.get_Items=function(){return this._24};t.prototype.get_RefreshFromParent=function(){return this._25}},
B=function(b){function e(a,c,b){if(a["set_"+c])return a["set_"+c](b),a["get_"+c]();a[c]=b;return a[c]}function a(c,d,b){if("object"===typeof d){var f=[],p;for(p in d)f.push(p);f.sort();for(p=0;p<f.length;p++){var k=f[p],e="";if(0===k.lastIndexOf("get_",0)&&"function"===typeof d[k]){var e=k.split("_")[1],g=!0;void 0!=d["set_"+e]&&"function"===typeof d["set_"+e]&&(g=!1);var h=d[k]();if(void 0!=h)if("object"!=typeof h){var l=""!==b?b+"_"+e:e,e=new t(e,l,h,g);c.get_Items().push(e)}else l=""!==b?b+"_"+
e:e,e=new t(e,l,h,g),c.get_Items().push(e),a(e,h,l)}}if(0===c._24.length&&"object"===typeof d){f=!0;for(k in d)if("function"===typeof d[k]){f=!1;break}k=Object.getOwnPropertyNames(d);if(f&&!Array.isArray(d))for(p=0;p<k.length;p++)"_"!==k[p][0]&&(l=""!==b?b+"_"+k[p]:k[p],h=d[k[p]],void 0!=h&&("object"!=typeof h?(e=new t(k[p],l,h,!1,!0),c.get_Items().push(e)):(e=new t(k[p],l,h,!1,!0),c.get_Items().push(e),a(e,h,l))))}}}function c(a,d,b,f){var e=d.get_Items();if(e.length!==f._24.length)b.push({property:f,
value:d._22,updateMarkup:!0});else{for(var k=!1,g=0;g<e.length;g++){d=e[g];var h=f._24[g];if(d._21!==h._21){b.push({property:f,value:d._22,updateMarkup:!0});k=!0;break}}if(!k)for(g=0;g<e.length;g++)if(d=e[g],h=f._24[g],d._21!==h._21)b.push({property:h,value:h._22,updateMarkup:!0});else if(h._24.length!==d._24.length)b.push({property:h,value:h._22,updateMarkup:!0});else if(0!=d._24.length)c(a,d,b,h);else if(k=h._22,d._22!=k){h=!0;if(d._22 instanceof Array&&k instanceof Array)if(d._22.length!=k.length)h=
!1;else for(var l=0;l<d._22.length;l++){if(d._22[l]!=k[l]){h=!1;break}}else h=!1;h||b.push({property:d,value:k})}}}B.prototype.get_ObjectProperties=function(){return this._27};B.prototype.setPropertyValue=function(a,c){for(var b=this._26,f=a.split("_"),p=this._27,k=0;k<f.length;k++)for(var h=0;h<p._24.length;h++)if(p._24[h]._20===f[k]){p=p._24[h];break}if(void 0!=p){h=[];switch(typeof p._22){case "boolean":c="True"===c?!0:!1;break;case "number":c=parseFloat(c)}try{if(1==f.length){var g=f[0];e(b,g,
c)}else if(p._25){m=b;for(b=0;b<f.length-2;b++)m=m["get_"+f[b]]();var l=f[f.length-2],g=f[f.length-1],q=m["get_"+l]();q[g]=c;e(m,l,q)}else{for(var m=b,k=0;k<f.length-1;k++)m=m["get_"+f[k]]();g=f[f.length-1];e(m,g,c)}h=this.updatePropertyGrid(new B(this._26))}catch(r){h.push(p)}0===h.length&&p._22!==c&&h.push(p);return h}};B.prototype.updatePropertyGrid=function(a){var d=[],b=[];c(this,this._27,d,a._27);if(0!=d.length)for(var f=0;f<d.length;f++)d[f].property._22=d[f].value,b.push(d[f].property);this._27=
a._27;return b};this._26=b;this._27=new t("","",b,!1);a(this._27,b,"")},r=function(b,e,a,c){function n(c,b,n){if("string"===typeof c)try{c=JSON.parse(c)}catch(e){}a&&("error"===b&&void 0==c.errorMessage&&""===c.responseText&&(c.errorMessage="Unknown service error OR service is unavailable."),a(c,b,n))}r.prototype.get_ActionName=function(){return this._28};r.prototype._4=function(){var a=$.extend(!0,{},this._31);a.success=this._30;a.error=this._29;return a};if(""===b)throw Error("Action name can not be empty.");
if(void 0!=e&&"function"!==typeof e)throw Error("Success callback must be defined as function.");if(void 0!=a&&"function"!==typeof a)throw Error("Error callback must be defined as function.");this._28=b;this._29=n;this._30=function(a,c,b){if("string"===typeof a)try{a=JSON.parse(a)}catch(p){}a.success?e&&e(a,c,b):n(a,c,b)};this._31=c},v=function(b,e){v.prototype.compositeError=function(){};v.prototype.compositeSuccess=function(){};v.prototype._4=function(){if(0!=this._32.length){for(var a=this._32[0]._4(),
b=[],d=0;d<this._32.length;d++)b[d]=this._32[d]._31.data,b[d].guid=d;var e=this;a.data={requestsData:b};a.success=function(a,c,d){if("string"===typeof a)try{a=JSON.parse(a)}catch(b){}for(c=0;c<a.length;c++)d=parseInt(a[c].guid),d=e._32[d],void 0!=d._30&&d._30(a[c]);$(e).triggerHandler({type:"compositeSuccess"})};a.error=function(a,c,d){if("string"===typeof a)try{a=JSON.parse(a)}catch(b){}if("object"===typeof a&&a.length)for(c=0;c<a.length;c++)d=parseInt(a[c].guid),d=e._32[d],void 0!=d._29&&d._29(a[c]);
else for("error"===c&&void 0==a.errorMessage&&""===a.responseText&&(a.errorMessage="Unknown service error OR service is unavailable."),c=0;c<e._32.length;c++)d=e._32[c],void 0!=d._29&&d._29(a);$(e).triggerHandler({type:"compositeError"})};return a}};this._28=e;if(!(b instanceof Array))throw Error("Argument type exception.");for(var a=0;a<b.length;a++)if(!(b[a]instanceof r))throw Error("Argument type exception.");this._32=b;delete v.prototype.compositeError;delete v.prototype.compositeSuccess};g.extend(v,
r);var q=function(b){q.prototype.addRequest=function(b){if(!(b instanceof r))throw Error("Argument type exception.");if(0===this._34)return this.sendRequest(b);this._35.push(b)};q.prototype.sendRequests=function(){var b=[],a=this._7();if(0!=a.length)for(var c=0;c<a.length;c++)b.push(this.sendRequest(a[c]));for(c=0;c<this._35.length;c++)b.push(this.sendRequest(this._35[c]));this._35=[];return b};q.prototype.sendRequest=function(b){throw Error("NotImplementedException.");};q.prototype.__beginInit=function(){this._34++};
q.prototype.__endInit=function(){this._34--;0>this._34&&(this._34=0);if(0===this._34)return this.sendRequests()};q.prototype._7=function(){for(var b=[],a=[],c=[],n=[],d=0;d<this._35.length;)"RenderThumbnail"===this._35[d]._28?(a.push(this._35[d]),this._35.splice(d,1)):"SaveAnnotationCollection"===this._35[d]._28?(c.push(this._35[d]),this._35.splice(d,1)):"GetImageInfo"===this._35[d]._28?(n.push(this._35[d]),this._35.splice(d,1)):d++;0!=a.length&&b.push(new v(a,"RenderThumbnails"));0!=c.length&&b.push(new v(c,
"SaveAnnotationCollections"));0!=n.length&&b.push(new v(n,"GetImagesInfo"));return b};this._33=b;this._34=0;this._35=[]};q.defaultUrlImageService=-1;var C=function(b){C.superclass.constructor.apply(this,arguments);C.prototype.sendRequest=function(b){var a=b._4();a.data instanceof FormData?a.data.append("sessionId",g.WebImagingEnviromentJS._13):(void 0!=a.data?("object"===typeof a.data&&(a.data.sessionId=g.WebImagingEnviromentJS._13),a.data=JSON.stringify(a.data)):a.data=JSON.stringify(g.WebImagingEnviromentJS._13),
a.contentType="application/json");a.url=this._33+"/"+b._28;return{request:b,object:$.ajax(a)}}};g.extend(C,q);var D=function(b){D.superclass.constructor.apply(this,arguments);D.prototype.sendRequest=function(b){var a=b._4();a.url=this._33;var c=a.data;c instanceof FormData?(c.append("action",b._28),c.append("sessionId",g.WebImagingEnviromentJS._13)):(void 0==c&&(c=g.WebImagingEnviromentJS._13),"object"===typeof c?(c.sessionId=g.WebImagingEnviromentJS._13,c={requestParams:JSON.stringify(c),action:b._28}):
c={requestParams:c,action:b._28});a.data=c;return{request:b,object:$.ajax(a)}}};g.extend(D,q);var w=function(){this._36=0;w.prototype.getImageInfo=function(b,e,a){throw Error("NotImplementedException");};w.prototype.getThumbnail=function(b,e,a,c,n,d){throw Error("NotImplementedException");};w.prototype.getTile=function(b,e,a,c,n,d,h,f,p){throw Error("NotImplementedException");};w.prototype.renderTiles=function(b,e,a,c,n,d){throw Error("NotImplementedException");};w.prototype.getImageAsBase64String=
function(b,e,a){throw Error("NotImplementedException");};w.prototype.isEqual=function(b){throw Error("NotImplementedException");};w.prototype.dispose=function(b,e,a){data={success:!0};void 0!=e&&e(data)}},s=function(b,e,a){s.superclass.constructor.apply(this,arguments);this._37=b;void 0==e&&(e=q.defaultUrlImageService);if(!(e instanceof q)&&-1!==e)throw Error("You should specify correct image service OR define the default image service.");this._38=e;void 0==a&&(a=q.defaultAnnotationService);if(void 0!=
a){if(!(a instanceof q))throw Error("You should specify correct annotation service OR define the default annotation service");this._39=a}s.prototype.get_FileUrl=function(){return this._37};s.prototype._get_ImServ=function(){return this._38};s.prototype._get_AnServ=function(){return this._39};s.prototype.isEqual=function(a){return this===a?!0:a instanceof s&&this._37===a._37?this._38._33===a._38._33&&(void 0==this._39&&void 0==a._39||void 0!=this._39&&void 0!=a._39&&this._39._33===a._39._33):!1};s.prototype.getImageInfo=
function(a,b,d){a=new r("GetImageInfo",b,d,{type:"POST",data:{imageInfo:{fileData:this._37,pageIndex:a,fileDataType:this._36}}});return this._38.addRequest(a)};s.prototype.getThumbnail=function(a,b,d,e,f,h){a=new r("RenderThumbnail",f,h,{type:"POST",data:{imageInfo:{fileData:this._37,pageIndex:a,fileDataType:this._36},thumbnailSize:{width:b,height:d},useCache:e,applicationUrl:window.location.href}});this._38.addRequest(a)};s.prototype.getTile=function(a,b,d,e,f,h,k,g,l){var m={};m.imageInfo={fileData:this._37,
pageIndex:a,fileDataType:this._36};m.tileSize={width:e,height:f};m.imagePoint={x:b,y:d};m.scale=h;m.useCache=k;m.applicationUrl=window.location.href;a=new r("GetImageTile",g,l,{type:"POST",data:m});return this._38.sendRequest(a)};s.prototype.renderTiles=function(a,b,d,e,f,h){var k={};k.imageInfo={fileData:this._37,pageIndex:a,fileDataType:this._36};k.tileSize={width:b,height:d};k.scale=e;k.applicationUrl=window.location.href;a=new r("RenderImageTiles",f,h,{type:"POST",data:k});return this._38.sendRequest(a)};
s.prototype.getImageAsBase64String=function(a,b,d){a=new r("GetImageAsBase64String",b,d,{type:"POST",data:{imageInfo:{fileData:this._37,pageIndex:a,fileDataType:this._36},applicationUrl:window.location.href}});return this._38.sendRequest(a)}};g.extend(s,w);var h=function(){};h._14=function(){};h._15=function(){};h._16=function(){};h._16=void 0;h.startRefreshImages=function(b){h._14=[];h._15=[];h._16=setInterval(F,b)};h.stopRefreshImages=function(){clearInterval(h._16);h._16=void 0;h._14=void 0;h._15=
void 0};h._17=function(b,e){for(var a=-1,c=0;c<h._14.length;c++)if(h._14[c]._33===e._33){a=c;break}-1==a?(h._14.push(e),h._15.push([b])):h._15[a].push(b)};h._18=function(b,e){for(var a=-1,c=0;c<h._14.length;c++)if(h._14[c]._33===e._33){a=c;break}if(-1!==a){var c=h._15[a],n=c.indexOf(b);-1!==n&&(c.splice(n,1),0===c.length&&(h._15.splice(a,1),h._14.splice(a,1)))}};var A=function(b,e){A.superclass.constructor.apply(this,arguments);this._36=1;void 0!=h._16&&h._17(b,e);A.prototype.dispose=function(a,c,
b){var d={};d.imageInfo={fileData:this._37,pageIndex:a,fileDataType:this._36};var e=this;a=new r("DisposeImage",function(a,b,d){void 0!=h._16&&h._18(e._37,e._38);void 0!=c&&c(a,b,d)},b,{type:"POST",data:d});return this._38.sendRequest(a)};A.prototype.isEqual=function(a){return this===a?!0:a instanceof A&&this._37===a._37?this._38._33===a._38._33&&(void 0==this._39&&void 0==a._39||void 0!=this._39&&void 0!=a._39&&this._39._33===a._39._33):!1}};g.extend(A,s);var l=function(b,e){l.prototype.disposed=
function(){};l.prototype.disposingError=function(a){};l.prototype.get_Size=function(){return void 0==this._43||void 0==this._44?void 0:{width:this._43,height:this._44}};l.prototype.get_Resolution=function(){return void 0==this._45||void 0==this._46?void 0:{x:this._45,y:this._46}};l.prototype.get_PixelFormat=function(){return this._pixelFormat};l.prototype.get_Source=function(){return this._40};l.prototype.get_PageIndex=function(){return this._41};l.prototype.get_Guid=function(){return this._42};l.prototype.isEqual=
function(a){if(!(a instanceof l))throw Error("Argument type exception.");return a._41===this._41&&this._40.isEqual(a._40)};l.prototype.getTile=function(a,c,b,d,e,f,h,k){var g=this;return this._40.getTile(this._41,a,c,b,d,e,f,function(f){f.image=g;f.pos={x:a,y:c};f.size={width:b,height:d};f.scale=e;h&&h(f)},function(f){f.image=g;f.pos={x:a,y:c};f.size={width:b,height:d};f.scale=e;void 0!=f.url&&(g._43=100,g._44=100,g._45=96,g._46=96);k&&k(f)})};l.prototype.renderTiles=function(a,c,b,d,e){return this._40.renderTiles(this._41,
a,c,b,d,e)};l.prototype.getThumbnail=function(a,c,b,d,e){var f=this;this._40.getThumbnail(this._41,a,c,b,function(b){b.image=f;b.width=a;b.height=c;void 0!=b.imageParam&&f._8(b.imageParam);d&&d(b)},function(b){b.image=f;b.width=a;b.height=c;e&&e(b)})};l.prototype.getImageInfo=function(a,c){var b=this;return this._40.getImageInfo(this._41,function(c){c.image=b;b._8(c);a&&a(c)},function(a){a.image=b;c&&c(a)})};l.prototype.getImageAsBase64String=function(a,c){var b=this;return this._40.getImageAsBase64String(this._41,
function(c){c.image=b;a&&a(c)},function(a){a.image=b;c&&c(a)})};l.prototype.dispose=function(){var a=this;this._40.dispose(this._41,function(c,b,d){$(a).triggerHandler({type:"disposed"})},function(c,b,d){b="Unknow error.";void 0!=c.errorMessage&&(b=c.errorMessage);$(a).triggerHandler({type:"disposingError",errorMessage:b})})};l.prototype._toObject=function(){return{fileData:this._40._37,pageIndex:this._41,fileDataType:this._40._36}};l.prototype._8=function(a){if(void 0==this._43||void 0==this._44||
void 0==this._45||void 0==this._46||void 0==this._pixelFormat){this._43=Number(a.imageSize.width);this._44=Number(a.imageSize.height);this._45=Number(a.imageResolution.width);this._46=Number(a.imageResolution.height);try{this._pixelFormat=new g.WebPixelFormatEnumJS(a.pixelFormat)}catch(c){this._pixelFormat=new g.WebPixelFormatEnumJS("Undefined")}}};if(!(b instanceof w))throw Error("Argument type exception.");this._40=b;this._41=e;this._42=g.WebImagingEnviromentJS.guid();this._43;this._44;this._45;
this._46;delete l.prototype.disposed;delete l.prototype.disposingError};q.defaultImageCollectionService=-1;var m=function(){function b(a,c){var b=!1,d=!1,e=!1;void 0==c._40._39&&(e=!0);for(var f=0;f<a._47.length;f++){var h=a._47[f],g=h.get_Source();if(g.isEqual(c.get_Source())){if(h._41===c._41)throw Error("Current image already exist in collection.");b||(c._40=g,c._40._38=g._38,c._40._39=g._39,e=d=b=!0)}d||c._40._38._33!==g._38._33||(c._40._38=g._38,d=!0);e||void 0==g._39||c._40._39._33!==g._39._33||
(c._40._39=g._39,e=!0)}}function e(a,c){for(var b=-1,d=0;d<a._47.length;d++)if(a._47[d]._42==c){b=d;break}return b}m.prototype.changing=function(a,c,b,d,e,f){};m.prototype.changed=function(a,c,b,d,e,f){};m.prototype.get_Count=function(){return this._47.length};m.prototype.get_Image=function(a){if(0<=a&&a<this._47.length)return this._47[a];throw Error("Argument out of range exception.");};m.prototype.indexOf=function(a){if(!(a instanceof l)&&"string"!==typeof a)throw Error("Argument type exception.");
return e(this,"string"===typeof a?a:a._42)};m.prototype.clear=function(){0!==this._47.length&&(this._48&&$(this).triggerHandler({type:"changing",actionName:"clear"}),this._47=[],this._48&&$(this).triggerHandler({type:"changed",actionName:"clear"}))};m.prototype.add=function(a){this.insert(this._47.length,a)};m.prototype.addRange=function(a){this.insertRange(this._47.length,a)};m.prototype.insert=function(a,c){if(!(c instanceof l)||"number"!==typeof a||isNaN(a))throw Error("Argument type exception.");
if(0<=a&&a<=this._47.length)b(this,c),this._48&&$(this).triggerHandler({type:"changing",actionName:"insert",imageIndex:a,image:c}),this._47.splice(a,0,c),this._48&&$(this).triggerHandler({type:"changed",actionName:"insert",imageIndex:a,image:c});else throw Error("Argument out of range exception.");};m.prototype.insertRange=function(a,c){if(void 0==c.length||"number"!==typeof a||isNaN(a))throw Error("Argument type exception.");for(var e=0;e<c.length;e++)if(!(c[e]instanceof l))throw Error("Argument type exception.");
if(0<=a&&a<=this._47.length){for(e=0;e<c.length;e++)b(this,c[e]);this._48&&$(this).triggerHandler({type:"changing",actionName:"insertRange",imageIndex:a,images:c});for(e=0;e<c.length;e++)this._47.splice(a+e,0,c[e]);this._48&&$(this).triggerHandler({type:"changed",actionName:"insertRange",imageIndex:a,images:c})}else throw Error("Argument out of range exception.");};m.prototype.removeAt=function(a){if("number"!==typeof a||isNaN(a))throw Error("Argument type exception.");if(0<=a&&a<this._47.length&&
0!=this._47.length){var c=this._47[a];this._48&&$(this).triggerHandler({type:"changing",actionName:"removeAt",imageIndex:a,image:c});this._47.splice(a,1);this._48&&$(this).triggerHandler({type:"changed",actionName:"removeAt",imageIndex:a,image:c})}else throw Error("Argument out of range exception.");};m.prototype.remove=function(a){if(!(a instanceof l))throw Error("Argument type exception.");a=e(this,a._42);if(-1!==a)this.removeAt(a);else throw Error("Image does not exist.");};m.prototype.removeImages=
function(a){var c=[];if(void 0==a.length)throw Error("Argument type exception.");for(var b=0;b<a.length;b++){if(!(a[b]instanceof l))throw Error("Argument type exception.");var d=e(this,a[b]._42);if(-1!==d)c.push(d);else throw Error("Image does not exist.");}this.removeRange(c)};m.prototype.removeRange=function(a){for(var b={},e=0;e<a.length;e++){if("number"!==typeof a[e]||isNaN(a[e]))throw Error("Argument type exception.");if(0>a[e]||a[e]>=this._47.length)throw Error("Argument out of range exception.");
void 0==b[a[e]]&&(b[a[e]]=1)}a=[];for(var d in b)a.push(Number(d));b=[];for(d=0;d<a.length;d++)b.push(this._47[a[d]]);this._48&&$(this).triggerHandler({type:"changing",actionName:"removeRange",imagesIndexes:a,images:b});for(d=a.length-1;0<=d;d--)this._47.splice(a[d],1);this._48&&$(this).triggerHandler({type:"changed",actionName:"removeRange",imagesIndexes:a,images:b})};m.prototype.set=function(a,b){if(!(b instanceof l)||"number"!==typeof a||isNaN(a))throw Error("Argument type exception.");if(0<=a&&
a<this._47.length&&0!=this._47.length){var e=this._47[a];this._48&&$(this).triggerHandler({type:"changing",actionName:"set",imageIndex:a,image:b,previousImage:e});this._48=!1;this.removeAt(a);this.insert(a,b);this._48=!0,$(this).triggerHandler({type:"changed",actionName:"set",imageIndex:a,image:b,previousImage:e})}else throw Error("Argument out of range exception.");};m.prototype.toArray=function(){for(var a=[],b=0;b<this._47.length;b++)a.push(this._47[b]);return a};m.prototype.openFile=function(a,
b,e,d){var g=this,f=function(a){a=a.imageInfos;for(var b=[],c=0;c<a.length;c++){var d=new s(a[c].fileData),d=new l(d,a[c].pageIndex);b.push(d)}g.clear();g.addRange(b)};d=q.defaultImageCollectionService;"function"===typeof b?f=b:b instanceof q&&(d=b);if(!(d instanceof q))throw Error("Argument type exception.");a=new r("OpenFile",f,e,{type:"POST",data:a});return d.sendRequest(a)};m.prototype.saveState=function(a,b,e){void 0==e&&(e=q.defaultImageCollectionService);if(!(e instanceof q))throw Error("Argument type exception.");
for(var d=this.toArray(),g=[],f=0;f<d.length;f++)d[f].get_Source()instanceof s&&g.push(d[f].toObject());a=new r("SaveState",a,b,{type:"POST",data:{imageInfos:g}});return e.sendRequest(a)};m.prototype.loadState=function(a,b,e){void 0==e&&(e=q.defaultImageCollectionService);if(!(e instanceof q))throw Error("Argument type exception.");a=new r("LoadState",a,b,{type:"POST"});return e.sendRequest(a)};this._47=[];this._48=!0;delete m.prototype.changing;delete m.prototype.changed};g.EnumGenerator=E;g.WebEnumItemBase=
x;g.WebFlagsEnumItemBase=y;g.WebPropertyInfoJS=t;g.WebPropertyGridJS=B;g.WebRequestJS=r;g.WebCompositeRequestJS=v;g.WebServiceJS=q;g.WebServiceControllerJS=C;g.WebServiceHandlerJS=D;g.WebStorageImageSourceLifetimeManager=h;g.WebImageSourceJS=w;g.WebUrlImageSourceJS=s;g.WebStorageImageSourceJS=A;g.WebImageJS=l;g.WebImageCollectionJS=m})(u.Shared||(u.Shared={}))})(Vintasoft||(Vintasoft={}));
